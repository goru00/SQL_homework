CREATE TABLE `Издательства` (
	`Код издательства` INT PRIMARY KEY AUTO_INCREMENT,
	`Название издательства` VARCHAR(60) NOT NULL,
	`Город` VARCHAR(30) NOT NULL,
	`Сайт издательства` VARCHAR(30) NULL
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Книги` (
	`ISBN` CHAR(20) PRIMARY KEY NOT NULL,
	`ББК` VARCHAR (20) NULL, 
	`Название книги` VARCHAR (160) NOT NULL,
	`Код издательства` INT NOT NULL,
	`Год издания` INT NOT NULL,
	`Количество страниц` INT NOT NULL,
	`Цена` INT NOT NULL,
 	FOREIGN KEY (`Код издательства`) REFERENCES  `Издательства` (`Код издательства`) ON DELETE NO ACTION ON UPDATE CASCADE
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Авторы книг` (
	`Код автора` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`ФИО автора` VARCHAR(40) NOT NULL	
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Книги-Авторы` (
	`ISBN` CHAR(20) NOT NULL,
	`Код автора` INT NOT NULL,
	PRIMARY KEY (`ISBN`, `Код автора`),
	FOREIGN KEY (`ISBN`) REFERENCES `Книги` (`ISBN`) ON DELETE NO ACTION ON UPDATE CASCADE,
	FOREIGN KEY (`Код автора`) REFERENCES `Авторы` (`Код автора`) ON DELETE NO ACTION ON UPDATE CASCADE
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Экземпляры` (
	`№ инвентарный` INT NOT NULL PRIMARY KEY AUTO_INCREMENT, 
	`ISBN` CHAR(20),
	FOREIGN KEY (`ISBN`) REFERENCES `Книги` (`ISBN`) ON DELETE NO ACTION ON UPDATE CASCADE 
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Должности` (
	`Код должности` INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
	`Наименование должности` VARCHAR(60) NOT NULL
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Читательский билет` (
	`Код работника` INT NOT NULL PRIMARY KEY,
	`ФИО` VARCHAR(40) NOT NULL,
	`Телефон` VARCHAR(20),
	`Код должности` INT NOT NULL,
	`Домашний адрес` VARCHAR(120),
	FOREIGN KEY (`Код должности`) REFERENCES `Должности` (`Код должности`) ON DELETE NO ACTION ON UPDATE CASCADE
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Книговыдача` ( 
	`№ инвентарный` INT NOT NULL,
	`№ читательского билета` INT NOT NULL,
	`Дата выдачи` DATE NOT NULL,
	`Дата возврата` DATE NULL,
	PRIMARY KEY (`№ инвентарный`, `№ читательского билета`, `Дата выдачи`),
	FOREIGN KEY (`№ читательского билета`) REFERENCES `Читательский билет` (`№ читательского билета`) ON DELETE NO ACTION ON UPDATE CASCADE
) COLLATE='utf8_unicode_ci';

CREATE TABLE `Настроечная` (
	`Название института` CHAR(30) NOT NULL,
	`Юридический адрес` CHAR(60) NOT NULL,
	`ФИО руководителя` CHAR(30) NOT NULL,
	`Код должности` INT NOT NULL,
	FOREIGN KEY (`Код должности`) REFERENCES `Должности` (`Код должности`) ON DELETE NO ACTION ON UPDATE CASCADE
) COLLATE='utf8_unicode_ci';

INSERT INTO `Издательства` (`Код издательства`, `Название издательства`, `Город`, `Сайт издательства`) VALUES
	(1, 'Питер', 'СПБ', NULL),
	(2, 'БХВ-Петербург', 'СПБ', NULL),
	(3, 'Финансы и статистика', 'М', NULL),
	(4, 'ИНФА-М', 'Новосибирск', NULL);

INSERT INTO `Книги` (`ISBN`, `ББК`, `Название книги`, `Код издательства`, `Год издания`, `Количество страниц`, `Цена`) VALUES
	('5-279-01941-0', '', 'Практикум по теории статистики', 3, 2001, 416, 230),
	('5-93196-328-6', NULL, 'Экономика:Практикум', 3, 2004, 296, 230),
	('5-94723-672-9', NULL, 'Математика для экономистов', 1, 2007, 464, 430),
	('978-5-459-00452-6', NULL, 'Дискретная математика', 1, 2011, 384, 400),
	('978-5-94157-703-3', NULL, 'Дискретная математика. Курс лекций и практических занятий', 2, 2007, 400, 380),
	('978-5-9558-0151-3', NULL, 'Микроэкономика для продвинутых. Задачи и решения. Учебник', 4, 2011, 160, 229),
	('978-5-98227-606-3', NULL, 'Методы социологического исследования: учебное пособие', 4, 2009, 296, 310);

INSERT INTO `Авторы книг` (`Код автора`, `ФИО автора`) VALUES
	(1, 'Новиков Ф.А.'),
	(2, 'Шаворев С.Д.'),
	(3, 'Киреев А.П.'),
	(4, 'Киреев П.А.'),
	(5, 'Стариченко Т.Н.'),
	(6, 'Девятко И.Ф.');

INSERT INTO `Должности` (`Код должности`, `Наименование должности`) VALUES
	(1, 'Студент'),
	(2, 'Доцент'),
	(3, 'Ст. преподаватель'),
	(4, 'Ассистент'),
	(5, 'Профессор'),
	(6, 'Зав. библиотекой'),
	(7, 'Библиотекарь'),
	(8, 'Ректор');

INSERT INTO `Читательский билет` (`Код работника`, `ФИО работника`, `Телефон`, `Код должности`, `Домашний адрес`) VALUES
	(1, 'Иванов С.В.', '8(495)912-54-18', 1, '432356, Курск, ул. Темерязьева, д. 34, кв. 24'),
	(2, 'Сидоров С.Ю.', '8(909)123-34-56', 2, '432367, Котельники, м-н Силикат, д. 45, кв. 12'),
	(3, 'Фонвизина А.И.', '8(904)123-43-56', 6, '333333, Мичуринск, пр-кт Маркса, д. 90, кв. 342'),
	(4, 'Петров И.С.', '8(495)911-39-35', 5, '222234, Москва, ул. Королева, д. 12, кв. 56'),
	(5, 'Воротенко Н.Ф.', '8(495)912-54-18', 1, '554567, Нижние Васюки, ул. Ленина, д. 56'),
	(6, 'Колосов П.С.', '8(906)758-84-92', 1, '556544, Московская обл., с. Куровское, ул. Комсомольская'),
	(7, 'Ершов В.Б.', '8(901)234-56-78', 8, '109147, Москва, Большой факельный пер., д. 38 А');

INSERT INTO `Экземпляры` (`№ инвентарный`, `ISBN`) VALUES
	(10564, '5-279-01941-0'),
	(10565, '5-279-01941-0'),
	(10566, '5-279-01941-0'),
	(20001, '5-93196-328-6'),
	(20002, '5-93196-328-6'),
	(20010, '5-94723-672-9'),
	(10533, '978-5-459-00452-6'),
	(10534, '978-5-459-00452-6'),
	(10535, '978-5-459-00452-6'),
	(10536, '978-5-94157-703-3'),
	(10537, '978-5-94157-703-3'),
	(20346, '978-5-94157-703-3'),
	(20011, '978-5-98227-606-3'),
	(20012, '978-5-98227-606-3'),
	(20345, '978-5-98227-606-3');

INSERT INTO `Книговыдача` (`№ инвентарный`, `№ читательского билета`, `Дата выдачи`, `Дата возврата`) VALUES
	(10533, '1', '2012-12-23', NULL),
	(10534, '1', '2012-10-02', '2012-12-07'),
	(10536, '2', '2012-12-23', NULL),
	(10564, '3', '2012-10-02', NULL),
	(20001, '4', '2012-07-05', NULL),
	(20010, '2', '2012-12-23', '2012-12-04'),
	(20345, '4', '2012-05-22', NULL),
	(20346, '4', '2012-06-04', NULL);

INSERT INTO `Книги-Авторы` (`ISBN`, `Код автора`) VALUES
	('5-94723-672-9', 1),
	('978-5-459-00452-6', 1),
	('5-279-01941-0', 2),
	('978-5-94157-703-3', 2),
	('5-279-01941-0', 3),
	('5-94723-672-9', 3),
	('978-5-9558-0151-3', 3),
	('978-5-9558-0151-3', 4),
	('5-279-01941-0', 5),
	('5-93196-328-6', 5),
	('978-5-98227-606-3', 6);
